<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <link rel="stylesheet" href="detalleAlojamiento.css">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/flatpickr/dist/flatpickr.min.css"/>
</head>
<body>
    <div class="container">
        
            <div class="header">Refugio Centro Mitre</div>

            <div class="images">
            <div class="main-image">
                <img src="${imagen}" alt="Interior principal">
            </div>
            </div>
        <div class="bottom">
            <div class="title_description">
                <div class="details">
                <h2>${titulo}</h2>
                <div class="info">${huespedes} hu√©spedes  ¬∑  ${dias-disponibles}</div>
                </div>

                <div class="ratings">
                <div>üèÖ Favorito entre hu√©spedes</div>
                <div>üåü ${puntuacio}<span class="star">‚òÖ‚òÖ‚òÖ‚òÖ‚òÖ</span> (86 Evaluaciones)</div>
                </div>

                <div class="description">
                ${descripcion}
                </div>
                <button class="show-more">Mostrar m√°s</button>
            </div>
        
            <div class="reserva-card">
                <h2><strong>${precio} USD</strong> <span>por 14 noches</span></h2>
                <div class="fecha-container">
                    <div class="fecha">
                        <label>CHECK-IN</label>
                        <input type="text" id="checkin" placeholder="Selecciona fecha" readonly>
                    </div>
                    <div class="fecha">
                        <label>CHECK-OUT</label>
                        <input type="text" id="checkout" placeholder="Selecciona fecha" readonly>
                    </div>
                </div>
                <!-- CONTENEDOR DE VIAJEROS -->
                <div class="viajeros" id="viajerosBox">
                    <label>VIAJEROS</label>
                    <div id="viajerosToggle">1 viajero ‚ñº</div>
                        <!-- Desplegable -->
                        <div id="viajerosDropdown" class="viajeros-dropdown">
                            <div class="grupo">
                                <div>
                                    <strong>Adultos</strong><br />
                                    <span>Edad: m√°s de 13 a√±os</span>
                                </div>
                                <div class="contador">
                                    <button onclick="cambiarContador('adultos', -1)">‚àí</button>
                                    <span id="adultos">1</span>
                                    <button onclick="cambiarContador('adultos', 1)">+</button>
                                </div>
                            </div>
                            <div class="grupo">
                                <div>
                                    <strong>Ni√±os</strong><br />
                                    <span>De 2 a 12 a√±os</span>
                                </div>
                                <div class="contador">
                                    <button onclick="cambiarContador('ninos', -1)">‚àí</button>
                                    <span id="ninos">0</span>
                                    <button onclick="cambiarContador('ninos', 1)">+</button>
                                </div>
                            </div>

                            <div class="grupo">
                                <div>
                                    <strong>Beb√©s</strong><br />
                                    <span>Menos de 2 a√±os</span>
                                </div>
                                <div class="contador">
                                    <button onclick="cambiarContador('bebes', -1)">‚àí</button>
                                    <span id="bebes">0</span>
                                    <button onclick="cambiarContador('bebes', 1)">+</button>
                                </div>
                            </div>

                            <div class="grupo">
                                <div>
                                    <strong>Mascotas</strong><br />
                                    <span><a href="#">¬øVas a llevar un animal de servicio?</a></span>
                                </div>
                                <div class="contador">
                                    <button onclick="cambiarContador('mascotas', -1)">‚àí</button>
                                    <span id="mascotas">0</span>
                                    <button onclick="cambiarContador('mascotas', 1)">+</button>
                                </div>
                            </div>
                        </div>
                    </div>
                
                <button class="btn-reservar">Reservar</button>

                <div class="info">No vamos a cobrarte ning√∫n cargo por el momento</div>
            </div>
        </div>
    </div>
     <script src="https://cdn.jsdelivr.net/npm/flatpickr"></script>
    <script>
        const checkin = document.getElementById("checkin");
        const checkout = document.getElementById("checkout");

        // Configurar Flatpickr en modo rango para vincular check-in y check-out
        const fpCheckin = flatpickr(checkin, {
        dateFormat: "d/m/Y",
        minDate: "today",
        onChange: function(selectedDates) {
            if (selectedDates.length > 0) {
            fpCheckout.set("minDate", selectedDates[0]);
            }
        }
        });

        const fpCheckout = flatpickr(checkout, {
        dateFormat: "d/m/Y",
        minDate: "today",
        onChange: function(selectedDates) {
            if (selectedDates.length > 0) {
            fpCheckin.set("maxDate", selectedDates[0]);
            }
        }
        });
    </script>

    <script>
    const viajerosDropdown = document.getElementById("viajerosDropdown");
    const viajerosToggle = document.getElementById("viajerosToggle");

    const contadores = {
        adultos: 1,
        ninos: 0,
        bebes: 0,
        mascotas: 0
    };

    function actualizarTexto() {
        const total = contadores.adultos + contadores.ninos;
        let texto = `${total} viajero${total !== 1 ? "s" : ""}`;
        if (contadores.bebes > 0) texto += `, ${contadores.bebes} beb√©${contadores.bebes !== 1 ? "s" : ""}`;
        viajerosToggle.textContent = texto + " ‚ñº";
    }

    function cambiarContador(tipo, cambio) {
        const maxPersonas = 2; // sin contar beb√©s
        const totalPersonas = contadores.adultos + contadores.ninos;
        const nuevos = contadores[tipo] + cambio;

        if (nuevos < 0) return;
        if ((tipo === "adultos" || tipo === "ninos") && nuevos + (tipo === "adultos" ? contadores.ninos : contadores.adultos) > maxPersonas) return;
        if (tipo === "mascotas") return; // no se permiten mascotas

        contadores[tipo] = nuevos;
        document.getElementById(tipo).textContent = nuevos;
        actualizarTexto();
    }

    viajerosToggle.addEventListener("click", () => {
        viajerosDropdown.style.display = viajerosDropdown.style.display === "block" ? "none" : "block";
    });

    function cerrarViajeros() {
        viajerosDropdown.style.display = "none";
    }

    // Click fuera del dropdown lo cierra
    document.addEventListener("click", function (event) {
        if (!document.getElementById("viajerosBox").contains(event.target)) {
        cerrarViajeros();
        }
    });

    actualizarTexto(); // Inicializa
    </script>
</body>
</html>